{% extends 'base.html' %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
   <style>
        .table img {
            width: 50px;
            height: auto;
            border-radius: 5px;
        }

        .quantity-select {
            width: 60px;
        }
        th{
            color: rgb(124, 124, 124);
        }
        /* .btn {
            background-color: #02a7c4;
            border-radius: 45px;
            color: white;
        } */
        .btn:hover {
            color: #fff;
        }

        
        .messages {
      list-style-type: none; /* Removes bullet points */
      padding: 10px;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 10px;
      color:  #155724;
    }

  .message {
    margin: 5px 0;
    padding: 8px 15px;
    background-color: #dff0d8; /* Light green background */
    border: 1px solid #c3e6cb; /* Green border */
    color: #155724; /* Dark green text */
    border-radius: 4px;
  }
  @media (max-width: 768px) {
  .messages {
    padding: 20px;
    font-size: 13px;
  }
  }
  .action-row {
          display: flex;
          justify-content: space-between;
          align-items: center;
          gap: 8px;
          flex-wrap: wrap;
        }
        
        .quantity-selector {
          display: flex;
          align-items: center;
          background: #f1f1f1;
          border-radius: 10px;
          padding: 2px 6px;
        }
        
        .qty-btn {
          background: #1db3cc;
          color: white;
          font-size: 14px;
          border: none;
          padding: 4px 6px;
          cursor: pointer;
          border-radius: 8px;
          transition: background 0.3s ease;
        }
        
        .qty-btn:hover {
          background: #fd7e14;
        }
        
        .qty-input {
          width: 50px;
          text-align: center;
          border: none;
          background: transparent;
          font-size: 16px;
          font-weight: 500;
          color: #333;
        }
        .remove-button {
      background-color: transparent;
      border: none;
      outline: none;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .remove-button i {
      font-size: 20px;
      color: #1db3cc;
      transition: color 0.3s ease, transform 0.3s ease;
    }

    .remove-button:hover {
      transform: scale(1.1);
    }

    .remove-button:hover i {
      color: #fd7e14;
    }
    .custom-btn {
      background-color: #1db3cc;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.3s ease, background-color 0.3s ease;
    }
  
    .custom-btn:hover {
      background-color: #0f96ae;
      transform: translateY(-3px);
    }
  
    h5 {
      margin: 0;
      font-weight: bold;
      color: #333;
    }
   
  </style>
  <div class="container my-4">
  <h2 class="mb-4 fw-bold text-center">Your Cart</h2>

  {% if cart_items %}
  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>Products</th>
              <th>Name & Details</th>
              <th>Quantity</th>
              <th>Discount Price</th>
              <th>Price</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart_items %}
            <tr>
              <td>
                <div class="d-flex align-items-center">
                  <img src="https://api.zbazaarsolutions.biz{{ item.Product_image }}" alt="{{ item.product_name }}"
                    class="mr-3" width="50">
                </div>
              </td>
              <td>
                <strong>{{ item.product_name }}</strong><br>
                <small style="font-weight: bold; color: rgb(2, 124, 172);">zv: {{ item.zv }}</small><br>
                <small class="text-muted">For: {{ item.purchase_for }}</small><br>
              </td>
              <td>{{ item.quantity }}</td>
              <td>₹{{ item.discounted_price }}</td>
              <td>₹{{ item.original_price }}</td>
              <td>
                <form method="post" action="{% url 'remove_cart_item' %}">
                  {% csrf_token %}
                  <input type="hidden" name="cart_id" value="{{ item.id }}">
                  <button class="remove-button" type="submit"
                    style="background: none; border: none; outline: none;">
                    <i class="fa fa-trash-o" style="margin-left: 20px; font-size: 20px;"></i>
                  </button>
                </form>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Show Totals and Place Order if cart has items -->
  <div class="container-fluid mt-4 ">
    <div class="row gy-3 align-items-center justify-content-center text-center text-md-start">
      <div class="col-12 col-md-3">
        <h5 class="mb-0">MRP Total: <span class="text-secondary">₹{{ total }}</span></h5>
      </div>
      <div class="col-12 col-md-3">
        <h5 class="mb-0">Discounted Total: <span class="text-danger" id="cart-total">₹ -{{ discount_mrp }}</span></h5>
      </div>
      <div class="col-12 col-md-2">
        <h5 class="mb-0">ZV: <span class="text-success">{{ zv }}</span></h5>
      </div>
      <div class="col-12 col-md-3">
        <h5 class="mb-0">Total Amount : <span class="text-black" id="cart-total">₹{{ total_amount }}</span></h5>
      </div>
      <div class="col-12 col-md-3">
        <form method="POST" action="{% url 'checkout_view' %}">
          {% csrf_token %}
          <input type="hidden" name="address_id" value="{{ address_id }}">
          <input type="hidden" name="payment_method" value="Fund Wallet">
          <button type="submit" class="btn custom-btn w-100">Place Order</button>
        </form>
      </div>
    </div>
  </div>

  {% else %}
  <!-- Empty cart message -->
  <div class="text-center my-5">
    <h4>Your cart is empty</h4>
    <p class="text-muted">Add some products to proceed.</p>
  </div>
  {% endif %}
</div>

<!-- 
<div class="container my-4">
  <h2 class="mb-4 fw-bold text-center">Your Cart</h2>
  <div class="card">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Products</th>
                                <th>Name & Details</th>
                                <th>Quantity</th>
                                
                                <th>Discount Price</th>
                                <th>Price</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                           {% for item in cart_items %}
                         
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">
                                            <img src="https://api.zbazaarsolutions.biz{{ item.Product_image }}" alt="{{ item.product_name }}" class="mr-3" width="50">
                                          
                                        </div>
                                    </td>
                                    <td>
                                        <strong>{{ item.product_name }}</strong><br>

                                        <small style="font-weight: bold; color: rgb(2, 124, 172);">zv: {{ item.zv }}</small><br>
                                        <small class="text-muted">For: {{ item.purchase_for }}</small><br>
                                    </td>  
                                    <td>
                                        {{ item.quantity }}
                                    </td>
                                    <td>
                                        ₹{{ item.discounted_price }}
                                    </td>
                                    <td>
                                        ₹{{ item.original_price }} 
                                    </td>
                                    <td>
                                      <form method="post" action="{% url 'remove_cart_item' %}">
                                          {% csrf_token %}
                                          <input type="hidden" name="cart_id" value="{{ item.id }}">
                                          <button class="remove-button" type="submit" style="background: none; border: none; outline: none;"> 
                                              <i class="fa fa-trash-o" style="margin-left: 20px; font-size: 20px;"></i>
                                          </button>
                                      </form>

                                    </td>
                                </tr>
                                {% endfor %}

                        </tbody>
                    </table>
                </div>
               
            </div>
        </form>
        </div>
</div>
<div class="container-fluid mt-4 ">
  <div class="row gy-3 align-items-center justify-content-center text-center text-md-start">


    <div class="col-12 col-md-3">
      <h5 class="mb-0">MRP Total: <span class="text-secondary">₹{{ total }}</span></h5>
    </div>


    <div class="col-12 col-md-3">
      <h5 class="mb-0">Discounted Total: <span class="text-danger" id="cart-total">₹ -{{ discount_mrp }}</span></h5>
    </div>


    <div class="col-12 col-md-2">
      <h5 class="mb-0">ZV: <span class="text-success">{{ zv }}</span></h5>
    </div>


    <div class="col-12 col-md-3">
      <h5 class="mb-0">Total Amount : <span class="text-black" id="cart-total">₹{{ total_amount }}</span></h5>
    </div>



    <div class="col-12 col-md-3">
      <form method="POST" action="">
        {% csrf_token %}
        <input type="hidden" name="address_id" value="{{ address_id }}">
        <input type="hidden" name="payment_method" value="Fund Wallet">
        <button type="submit" class="btn custom-btn w-100">Place Order</button>
      </form>
    </div>

  </div>
</div> -->

 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock %}